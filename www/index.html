<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>SQLEdit</title>
		<link href="dist/app.css" rel="stylesheet" />
	</head>
	<body class="w-full h-full p-0 m-0 overflow-x-hidden overflow-y-scroll font-sans text-base bg-blue-100 xl:text-lg" x-data="App.start('.js-file', '.js-filterby', '.js-text-input')">
		<main class="absolute top-0 bottom-0 left-0 right-0 p-0 m-0">
			<nav class="fixed top-0 left-0 right-0 flex flex-wrap items-center h-10 text-white bg-blue-900 border-b-2 border-white">
				<span class="inline-block">
					<!-- File Picker -->
					<input type="file" class="hidden js-file" accept=".sql,.dump,.txt" @change="loadFile" @blur="loadFile">
					<a @click="openFilePicker" class="px-2 py-2 text-white outline-none cursor-pointer hover:bg-blue-700">Open...</a>
				</span>

				<span class="absolute right-0">
					<a @click="clearApp" class="px-2 py-2 text-white outline-none cursor-pointer hover:bg-blue-700">Clear</a>
				</span>
			</nav>

			<div class="flex items-center justify-center h-full pt-10">
				<div class="w-full h-full">
					<div class="flex h-full bg-white">
						<div class="w-1/3 p-2 bg-blue-100 border-r border-blue-200 xl:w-1/4" style="flex: 0 1 auto; overflow-y: auto; overflow-x: hidden;">
							<div class="text-black">
								<div class="italic font-semibold text-center text-md">
									<span x-text="tableName"></span>
								</div>
								<div class="h-4">
									<span class="float-right text-xs" x-text="'Columns: ' + dbColumns.length"></span>
								</div>
							</div>
							<div class="relative mt-2">
								<input type="text" class="w-full px-2 py-1 text-sm border border-blue-200 outline-none js-filterby" placeholder="Search..." x-on:keyup="filterColumns">
								<span class="absolute top-0 h-4 cursor-pointer" style="right: 10px" @click="resetFilter" x-show="filterColumnsBy.length > 0">x</span>
							</div>
							<div class="pt-1 mt-3 border-t border-blue-200">
								<ul class="text-sm">
									<template x-for="(column, index) in filteredColumns" :key="index">
										<li class="px-1 cursor-pointer hover:bg-blue-200" :class="{ 'underline italic': filterColumnsBy === column }" @click="selectColumn(column)">
											<a href="#" x-text="column"></a>
										</li>
									</template>
								</ul>
							</div>
						</div>
						<div class="flex-grow">
							<textarea class="w-full h-full px-2 py-1 outline-none js-text-input" style="overflow: auto; resize: none" x-text="textContent" x-on:keyup="handleChange" x-on:paste="scheduleGuiUpdate"></textarea>
						</div>
					</div>
				</div>
			</div>
		</main>

		<div class="notifications">
			<div class="hidden notification-item is-danger is-warning is-info is-success"></div>
		</div>

		<script>require('./components/EventEmitter.js');</script>
		<script>require('./dist/app.js');</script>
	</body>
</html>